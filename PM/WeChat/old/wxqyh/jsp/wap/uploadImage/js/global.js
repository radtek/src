jQuery.extend(jQuery.ajax,{_requestCache:{}});jQuery.extend({DIC:{charset:"utf-8",getcookie:function(c){var b=document.cookie.indexOf(c+"=");var a=document.cookie.indexOf(";",b);return b==-1?"":unescape(document.cookie.substring(b+c.length+1,(a>b?a:document.cookie.length)))},in_array:function(c,b){if(typeof c=="string"||typeof c=="number"){for(var a in b){if(b[a]==c){return true}}}return false},setcookie:function(g,f,e,d,b,c){var a=new Date();a.setTime(a.getTime()+e);document.cookie=escape(g)+"="+escape(f)+(a?"; expires="+a.toGMTString():"")+(d?"; path="+d:"/")+(b?"; domain="+b:"")+(c?"; secure":"")},getQuery:function(c){var b=window.location.search;if(b.indexOf("?")!=-1){var f=b.substr(1).split("&");var e={};var d=[];var a="";for(i=0;i<f.length;i++){d=f[i].split("=");a=decodeURIComponent(d[0]);if(a.substr(-2)=="[]"){if(!e[a]){e[a]=[]}e[a].push(d[1])}else{e[a]=d[1]}}if(c){if(e[c]){return e[c]}return null}else{return e}}},reload:function(a,b){a=a||"";b=b||1;re=/^http(s)?:\/\/(([^\/\.]+\.)*)?(qq\.com)(\/.*)*$/;re1=/^http(s)?:\/\//;setTimeout(function(){if(re.test(a)){window.location.href=a}else{if(a&&!re1.test(a)){window.location.href="http://"+window.location.hostname+a}else{window.location.reload()}}},b)},open:function(a){jQuery.DIC.reload()},trim:function(a){return a.replace(/(^\s*)|(\s*$)/g,"")},isObjectEmpty:function(a){for(i in a){return false}return true},strlen:function(a){return(/msie/.test(navigator.userAgent.toLowerCase())&&a.indexOf("\n")!==-1)?a.replace(/\r?\n/g,"_").length:a.length},mb_strlen:function(c){var a=0;for(var b=0;b<c.length;b++){a+=c.charCodeAt(b)<0||c.charCodeAt(b)>255?(jQuery.DIC.charset.toLowerCase()==="utf-8"?3:2):1}return a},mb_cutstr:function(f,e,b){var a=0;var c="";var b=!b&&b!==""?"...":b;e=e-b.length;for(var d=0;d<f.length;d++){a+=f.charCodeAt(d)<0||f.charCodeAt(d)>255?(jQuery.DIC.charset.toLowerCase()==="utf-8"?3:2):1;if(a>e){c+=b;break}c+=f.substr(d,1)}return c},strLenCalc:function(f,b,e){var c=f.value,e=!e?200:e,g=e,a=jQuery.DIC.strlen(c);for(var d=0;d<c.length;d++){if(c.charCodeAt(d)<0||c.charCodeAt(d)>127){g-=2}else{g-=1}}jQuery("#"+b).html(Math.floor(g/2))},dialog:function(p){var p=p||{};var a=p.id||"tips";var y="fwin_dialog_"+a;var f="fwin_mask_"+a;if(!p.content){document.ontouchmove=function(A){return true};jQuery("#"+y).remove();jQuery("#"+f).remove();return false}var z=p.title||"提示信息";var t=p.content||"";var e=p.okValue||false;var r=p.cancelValue||false;var c=p.isMask||false;var m=$('div[id^="fwin_dialog_"]').length||0;var j=1000+m*10;var k=j+1;var s="position:absolute;top:-0px;left:-0px;width:"+jQuery(document).width()+"px;height:"+jQuery(document).height()+"px;background:#000;filter:alpha(opacity=60);opacity:0.5; z-index:"+j+";";var o=p.isHtml||false;var q=p.autoClose||false;var l=p.isConfirm||false;var b="";switch(p.icon){case"success":b="icon_success";break;case"none":b="";break;case"error":default:b="g-layer-tips";break}var w=[];if(c){var v=[];v.push("<div id="+f+' class="g-mask" style="'+s+'"></div>');var h=v.join("");jQuery(h).appendTo("body");document.ontouchmove=function(A){A.preventDefault()}}if(o){w.push('<div style="width:100%;position:fixed;z-index:'+k+';" id="'+y+'">'+t+"</div>")}else{if(!p.title&&!e&&!r){w.push('<div class="tips" style="position:fixed;z-index:'+k+';" id="'+y+'">');if(a=="loading"){w.push('<div class="loadInco tipL" style="vertical-align: -5px;"><span class="blockG" id="rotateG_01"></span><span class="blockG" id="rotateG_02"></span><span class="blockG" id="rotateG_03"></span><span class="blockG" id="rotateG_04"></span><span class="blockG" id="rotateG_05"></span><span class="blockG" id="rotateG_06"></span><span class="blockG" id="rotateG_07"></span><span class="blockG" id="rotateG_08"></span></div> ')}w.push(t+"</div>")}else{if(l){if(confirm(t)){if(typeof p.ok=="function"){p.ok()}}else{if(typeof p.cancel=="function"){p.cancel()}}return true}else{w.push('<div style="min-width:350px;position:fixed;z-index:'+k+';" id="'+y+'"><span class="close"></span>');w.push('<div class="popLayer pSpace" style="width:80%">');w.push('<p class="editTCon">'+t+"</p>");w.push('<div class="editArea">');w.push(e?'<a href="javascript:;" class="editBtn1 db" title="">'+e+"</a>":"");w.push(r?'<a href="javascript:;" class="editBtn2 db" title="">'+r+"</a>":"");w.push("</div></div>")}}}var u=w.join("");if(jQuery("#"+y)[0]){jQuery("#"+y).remove();jQuery("#"+f).remove()}jQuery(u).appendTo("body");var x=jQuery(window).width();var g=jQuery(window).height();n=(x-jQuery("#"+y).outerWidth())/2;d=(g-jQuery("#"+y).height())*0.382;var n=p.left||n;var d=p.top||d;jQuery("#"+y).css({top:d+"px",left:n+"px"});jQuery("#"+y+" .close").click(function(){if(c){document.ontouchmove=function(B){return true}}var A=true;if(typeof p.close=="function"){A=p.close()}if(A){jQuery("#"+f).hide();jQuery("#"+f).remove();jQuery("#"+y).hide();jQuery("#"+y).remove()}});if(typeof p.callback=="function"){if(c){document.ontouchmove=function(A){A.preventDefault()}}p.callback()}if(typeof p.ok=="function"){jQuery("#"+y+" .editBtn1").click(function(){p.ok()})}if(typeof p.cancel=="function"){jQuery("#"+y+" .editBtn2").click(function(){p.cancel()})}if(jQuery("#"+y+" .editBtn1")[0]){jQuery("#"+y+" .editBtn1").click(function(){jQuery("#"+y+" .close").click()})}if(jQuery("#"+y+" .editBtn2")[0]){jQuery("#"+y+" .editBtn2").click(function(){jQuery("#"+y+" .close").click()})}if(!p.title&&!e&&!r&&q){q=q>1?q:1000;setTimeout(function(){jQuery("#"+y).fadeOut("slow",function(){jQuery("#"+f).hide();jQuery("#"+f).remove();jQuery("#"+y).hide();jQuery("#"+y).remove();if(typeof p.close=="function"){p.close()}})},q)}},timerId:false,initTouch:function(a){var c=a.obj||document;var f,e,k,j,d;function b(l){var m=l.touches[0];e=m.pageY;f=m.pageX;k=m.pageX;j=m.pageY;if(typeof a.start=="function"){a.start(l)}}function g(l){window.clearInterval($.DIC.timerId);touch=l.touches[0];k=touch.pageX;j=touch.pageY;if(document.body.scrollTop<=0&&(e-j)<=0&&jQuery.os.ios){l.preventDefault()}if(typeof a.move=="function"){var m={x:f-k,y:e-j};a.move(l,m)}if(!jQuery.os.ios){$.DIC.timerId=window.setTimeout(function(){h()},50)}}function h(l){if(typeof a.end=="function"){var m={x:f-k,y:e-j};a.end(l,m)}}c.addEventListener("touchstart",b,false);c.addEventListener("touchmove",g,false);if(jQuery.os.ios){c.addEventListener("touchend",h,false)}},showLoading:function(b,c,a){var b=b||"block";var a=a||false;c=c||"正在加载...";if(b=="block"){jQuery.DIC.dialog({id:"loading",content:c,noMask:true,autoClose:a})}else{jQuery.DIC.dialog({id:"loading"})}},ajax:function(a,c,b){var b=b||{};var e="";a=a.indexOf("?")===-1?a+"?":a+"&";a=a.replace(/\&resType\=[^\&]+/g,"")+"resType=json";a=a.replace(/\&isAjax\=1/g,"")+"&isAjax=1";var d={url:a,data:c,processData:b.isUpload,contentType:b.isUpload?false:"application/x-www-form-urlencoded",type:c?"POST":"GET",dataType:b.dataType||"json",timeout:b.timeout||30000,jsonp:b.dataType==="jsonp"?"callback":null,jsonpCallback:b.dataType==="jsonp"?b.success:null,beforeSend:function(h,g){if(b.requestIndex){if(b.requestMode=="block"){if(jQuery.ajax._requestCache[b.requestIndex]){return false}}else{if(b.requestMode=="abort"){if(jQuery.ajax._requestCache[b.requestIndex]){jQuery.ajax._requestCache[b.requestIndex].abort()}}}}var f=true;if(typeof b.beforeSend=="function"){f=b.beforeSend(h,g)}if(f){jQuery.ajax._requestCache[b.requestIndex]=h;if(!b.noShowLoading){e=setTimeout(function(){jQuery.DIC.showLoading()},100)}}return f},complete:function(g,f){if(jQuery.ajax._requestCache[b.requestIndex]){jQuery.ajax._requestCache[b.requestIndex]=null}if(typeof b.complete=="function"){b.complete(g,f)}},success:function(f,k,j){clearTimeout(e);jQuery.DIC.showLoading("none");if(f==null&&!b.noMsg){jQuery.DIC.dialog({content:"您的网络有些问题，请稍后再试 [code:1]",autoClose:true})}if(typeof f!=="object"){f=jQuery.parseJSON(f)}if(f.errCode==0){if(!b.noMsg){jQuery.DIC.dialog({content:f.message,icon:"success",autoClose:true})}if(typeof b.success=="function"){b.success(f,k,b)}if(!b.noJump&&f.jumpURL){var h=f.locationTime||2000;jQuery.DIC.reload(f.jumpURL,h)}}else{if(f.errCode){if(!b.noMsg){var g=f.message+'<span style="display:none;">'+f.errCode+"</span>";jQuery.DIC.dialog({content:g,autoClose:true})}}else{if(!b.noMsg){jQuery.DIC.dialog({content:"数据解析失败，请稍后再试 [code:2]",autoClose:true})}}}},error:function(f,h,g){clearTimeout(e);jQuery.DIC.showLoading("none");if(f.readyState==0||f.status==0){return false}else{if(h!="abort"&&!b.noMsg){if(!b.noMsg){var j="";switch(h){case"timeout":j="对不起，请求服务器网络超时";break;case"error":j="网络出现异常，请求服务器错误";break;case"parsererror":j="网络出现异常，服务器返回错误";break;case"notmodified":default:j="您的网络有些问题，请稍后再试[code:3]"}jQuery.DIC.dialog({content:j,autoClose:true})}}}if(typeof b.error=="function"){b.error()}}};jQuery.ajax(d);return false},ajaxForm:function(e,c,b){var c=c||{};var f="";var a=c.url||jQuery("#"+e).prop("action");a=a.indexOf("?")===-1?a+"?":a+"&";a=a.replace(/\&resType\=[^\&]+/g,"")+"resType=json";a=a.replace(/\&isAjax\=1/g,"")+"&isAjax=1";var d={beforeSubmit:function(k,j,h){if(jQuery.ajax._requestCache[e]==1){return false}var g=true;if(typeof c.beforeSubmit=="function"){g=c.beforeSubmit(k,j,h,c)}if(g){jQuery.ajax._requestCache[e]=1;if(!c.noShowLoading){f=setTimeout(function(){jQuery.DIC.showLoading()},100)}}return g},success:function(g,h){jQuery.ajax._requestCache[e]=null;clearTimeout(f);jQuery.DIC.showLoading("none");if(g==null&&!c.noMsg){jQuery.DIC.dialog({content:"您的网络有些问题，请稍后再试 [code:1]",autoClose:true})}if(typeof g!=="object"){g=jQuery.parseJSON(g)}if(g.errCode==0){if(!c.noMsg){jQuery.DIC.dialog({content:g.message,icon:"success",autoClose:true})}if(typeof c.success=="function"){c.success(g,h,c)}if(!c.noJump&&g.jumpURL){var k=g.locationTime||2000;jQuery.DIC.reload(g.jumpURL,k)}}else{if(g.errCode){if(!c.noMsg){var j=g.message+'<span style="display:none;">'+g.errCode+"</span>";jQuery.DIC.dialog({content:j,autoClose:true})}}else{if(!c.noMsg){jQuery.DIC.dialog({content:"数据解析失败，请稍后再试 [code:2]",autoClose:true})}}}},url:a,clearForm:c.clearForm,resetForm:c.resetForm,timeout:c.timeout||15000,dataType:c.dataType||"json",error:function(g,j,h){jQuery.ajax._requestCache[e]=null;clearTimeout(f);jQuery.DIC.showLoading("none");if(!c.noMsg){var k="";switch(j){case"timeout":k="对不起，请求服务器超时";break;case"error":k="网络出现异常，请求服务器错误";break;case"parsererror":k="网络出现异常，服务器返回错误";break;case"notmodified":default:k="您的网络有些问题，请稍后再试[code:3]"}jQuery.DIC.dialog({content:k,autoClose:true})}if(typeof c.error=="function"){c.error(j)}}};b=b||false;if(b){jQuery("#"+e).ajaxSubmit(d)}else{jQuery("#"+e).ajaxForm(d)}return false},touchState:function(c,b,a){b=b||"commBg";a=a||"";if(a){$(a).on("tap",c,function(){obj=$(this);obj.addClass(b);setTimeout(function(){obj.removeClass(b)},200)})}else{$(c).on("tap",function(){obj=$(this);obj.addClass(b);setTimeout(function(){obj.removeClass(b)},200)})}},handleLink:function(b,a){a=a||"";if(a){$(a).on("tap",b,function(d){d.preventDefault();var c=$(this).attr("_href");jQuery.DIC.reload(c)})}else{$(b).on("tap",function(d){d.preventDefault();var c=$(this).attr("_href");jQuery.DIC.reload(c)})}}}});jQuery.extend({os:{ios:false,android:false,version:false}});(function(){var b=navigator.userAgent;var g={},n=b.match(/WebKit\/([\d.]+)/),d=b.match(/(Android)\s+([\d.]+)/),o=b.match(/(iPad).*OS\s([\d_]+)/),p=b.match(/(iPod).*OS\s([\d_]+)/),m=!p&&!o&&b.match(/(iPhone\sOS)\s([\d_]+)/),q=b.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),l=q&&b.match(/TouchPad/),k=b.match(/Kindle\/([\d.]+)/),h=b.match(/Silk\/([\d._]+)/),c=b.match(/(BlackBerry).*Version\/([\d.]+)/),j=b.match(/MQQBrowser\/([\d.]+)/),f=b.match(/CriOS\/([\d.]+)/),e=b.match(/Opera\/([\d.]+)/),a=b.match(/Safari\/([\d.]+)/);if(d){jQuery.os.android=true;jQuery.os.version=d[2]}if(m){jQuery.os.ios=jQuery.os.iphone=true;jQuery.os.version=m[2].replace(/_/g,".")}if(o){jQuery.os.ios=os.ipad=true;jQuery.os.version=o[2].replace(/_/g,".")}if(p){jQuery.os.ios=os.ipod=true;jQuery.os.version=p[2].replace(/_/g,".")}})();var htmlEncode=function(a){return a.replace(/&/g,"&amp").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")};var htmlDecode=function(a){return a.replace(/&amp;/g,"&").replace(/&quot;/g,'/"').replace(/&lt;/g,"<").replace(/&gt;/g,">")};